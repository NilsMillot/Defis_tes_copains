{% extends 'base_front.html.twig' %}
{% block title %}Information du Challenge{% endblock %}

{% block body %}

    <div class="row">
        <h1 id='{{ challenge.id }}' class="col">{{ challenge.name }}
            {% if challenge.status == true %}
                <span class="chip teal accent-3"> Ouvert </span>
            {% else %}
                <span class="chip red darken-1"> Ferm√© </span>
            {% endif %}
        </h1>
    </div>
    <div class="row">
        <div class="col s3">
            <div class="card horizontal">
                <table class="centered">
                    <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for register in challenge.challengesUserRegisters %}
                        <tr>
                            <td>
                                <span> {{ register.userRegister.username }} </span>
                            </td>
                            {% if register.userRegister == challenge.winner %}
                                <td>
                                    <a class="waves-effect waves-light btn green darken-1"
                                       href="{{ path('challenges_info_winner', {'id': challenge.id,'id_user':register.userRegister.id}) }}">Gagnant</a>
                                </td>
                            {% else %}
                                <td>
                                    <a class="waves-effect waves-light btn orange darken-1"
                                       href="{{ path('challenges_info_winner', {'id': challenge.id,'id_user':register.userRegister.id}) }}">Gagnant
                                        ?</a>
                                </td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col s3 ">
            <div class="card horizontal teal accent-3" style="height: 100px;">
                {% set count = 0 %}
                {% for post in challenge.challengesUserRegisters %}
                    {% set count = count + 1 %}
                {% endfor %}
                <div style="text-align: center;width: 100%;">
                    <h3> {{ count }}<i class="material-icons small">face</i></h3>
                </div>
            </div>
        </div>
        <div class="col s3 ">
            <div class="card horizontal cyan lighten-3" style="height: 100px;">
                {% set count = 0 %}
                {% for post in challenge.postId %}
                    {% set count = count + 1 %}
                {% endfor %}
                <div style="text-align: center;width: 100%;">

                    <h3> {{ count }} <i class="material-icons small">chat</i></h3>
                </div>

            </div>
        </div>

        <div class="col s3 ">
            <div class="card horizontal red accent-2" style="height: 100px;">
                 {% set count = 0 %}
                 {% for liked in challenge.userLikeChallenges %}
                    {% set count = count + 1 %}
                 {% endfor %}
{#                todo gestion des likes des challenges #}
                <div style="text-align: center;width: 100%;">
                    <h3> {{ count }}<i class="material-icons small">favorite_border</i></h3>
                </div>
            </div>
        </div>
    </div>
    
    <a  class="waves-effect waves-light btn orange accent-3 " href="{{ path('challenges_show', {'id': challenge.id}) }}">Retour au challenge</a>

{% endblock %}